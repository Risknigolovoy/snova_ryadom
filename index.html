
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Снова рядом</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js">
  var starSound = new Howl({
    src: ['https://cdn.pixabay.com/download/audio/2022/03/15/audio_587491f6e3.mp3?filename=magic-attack-7187.mp3'],
    volume: 0.7
  });

  var bgMusic = new Howl({
    src: ['https://cdn.pixabay.com/download/audio/2023/03/28/audio_1f8a3b8c86.mp3?filename=calm-background-144984.mp3'],
    autoplay: true,
    loop: true,
    volume: 0.3
  });

  // Trigger background music only after user interaction (iOS restriction)
  document.body.addEventListener('click', function startMusicOnce() {
    bgMusic.play();
    document.body.removeEventListener('click', startMusicOnce);
  });

  star.addEventListener("click", () => {
    star.style.display = "none";
    foundMsg.style.display = "block";
    starSound.play();
  });

  // Moon/Light added above

  // Story reveal
  document.addEventListener("DOMContentLoaded", function () {
    const storyBlocks = document.querySelectorAll(".story-text");
    storyBlocks.forEach(block => {
      const spans = block.querySelectorAll("span");
      let i = 0;
      function showNext() {
        if (i < spans.length) {
          spans[i].style.opacity = 1;
          i++;
          setTimeout(showNext, 1500);
        }
      }
      block.classList.add("visible");
      showNext();
    });
  });

  // Path mini-game
  function choosePath(direction) {
    const result = document.getElementById("pathResult");
    if (direction === 'left') {
      result.innerText = "Ты пошла налево и увидела звезду!";
    } else {
      result.innerText = "Ты пошла направо и вышла к реке.";
    }
    result.style.display = "block";
  }
</script>


  <style>
    .fade-in {
      animation: fadeInScene 1.5s ease-in forwards;
      opacity: 0;
    }
    @keyframes fadeInScene {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    html, body {
      margin: 0;
      padding: 0;
      background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
      font-family: 'Georgia', serif;
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    .scene {
      height: 100vh;
      width: 100vw;
      position: relative;
      overflow: hidden;
    }
    .intro {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      color: white;
      text-align: center;
      position: relative;
    }
    .title {
      font-size: 2em;
      margin-bottom: 20px;
      opacity: 0;
      animation: fadeIn 2s forwards;
      animation-delay: 1s;
    }
    .start-button {
      background: #fff;
      color: #111;
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
      opacity: 0;
      animation: fadeIn 2s forwards;
      animation-delay: 3s;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    .svg-cat {
      width: 120px;
      height: auto;
      margin-bottom: 30px;
      animation: float 3s ease-in-out infinite;
      cursor: pointer;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .scene-content {
      color: white;
      padding: 60px 20px;
      text-align: center;
      font-size: 1.1em;
    }
    .castle {
      position: absolute;
      bottom: 0;
      width: 100%;
      max-height: 300px;
      opacity: 0.4;
    }
    .stars {
      position: absolute;
      width: 100%;
      height: 100%;
      background: transparent url('https://upload.wikimedia.org/wikipedia/commons/3/3f/Stars_Sky_Background.png') repeat;
      background-size: cover;
      z-index: 0;
      animation: moveStars 60s linear infinite;
    }
    @keyframes moveStars {
      0% { background-position: 0 0; }
      100% { background-position: 0 -2000px; }
    }
    .game-area {
      position: relative;
      width: 100%;
      height: 100%;
    }
    .star {
      width: 40px;
      height: 40px;
      background: yellow;
      border-radius: 50%;
      position: absolute;
      cursor: pointer;
      box-shadow: 0 0 10px white;
    }
    .found-message {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 1.5em;
      display: none;
    }
  
    /* Moon and castle light animation */
    .moon {
      position: absolute;
      top: 40px;
      right: 40px;
      width: 80px;
      height: 80px;
      background: radial-gradient(circle, #fdfbd3 0%, #e0ddaa 70%, transparent 100%);
      border-radius: 50%;
      box-shadow: 0 0 20px 10px rgba(255, 255, 200, 0.3);
      z-index: 2;
      animation: pulseMoon 6s ease-in-out infinite;
    }

    @keyframes pulseMoon {
      0%, 100% { box-shadow: 0 0 20px 10px rgba(255, 255, 200, 0.3); }
      50% { box-shadow: 0 0 30px 15px rgba(255, 255, 200, 0.5); }
    }

    .castle-light {
      position: absolute;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 20px;
      background: gold;
      border-radius: 50%;
      opacity: 0.5;
      animation: flicker 1.2s infinite alternate;
    }

    @keyframes flicker {
      0% { opacity: 0.4; }
      100% { opacity: 1; }
    }

    /* Progressive text */
    .story-text span {
      opacity: 0;
      transition: opacity 1s ease;
    }

    .story-text.visible span {
      opacity: 1;
    }

    /* Second mini-game styles */
    .path-choice {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 40px;
    }

    .path-button {
      padding: 12px 20px;
      background: #fff;
      color: #111;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }

    .path-result {
      margin-top: 30px;
      font-size: 1.2em;
      color: white;
      display: none;
    }
    </style>


  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("in-view");
            }
          });
        },
        { threshold: 0.3 }
      );

      document.querySelectorAll(".scene").forEach((el) => {
        observer.observe(el);
      });
    });
  
  // Moon/Light added above

  // Story reveal
  document.addEventListener("DOMContentLoaded", function () {
    const storyBlocks = document.querySelectorAll(".story-text");
    storyBlocks.forEach(block => {
      const spans = block.querySelectorAll("span");
      let i = 0;
      function showNext() {
        if (i < spans.length) {
          spans[i].style.opacity = 1;
          i++;
          setTimeout(showNext, 1500);
        }
      }
      block.classList.add("visible");
      showNext();
    });
  });

  // Path mini-game
  function choosePath(direction) {
    const result = document.getElementById("pathResult");
    if (direction === 'left') {
      result.innerText = "Ты пошла налево и увидела звезду!";
    } else {
      result.innerText = "Ты пошла направо и вышла к реке.";
    }
    result.style.display = "block";
  }
</script>

  <style>
    .scene {
      transform: scale(0.98);
      opacity: 0;
      transition: all 1.2s ease;
    }

    .scene.in-view {
      transform: scale(1);
      opacity: 1;
    }
  
    /* Moon and castle light animation */
    .moon {
      position: absolute;
      top: 40px;
      right: 40px;
      width: 80px;
      height: 80px;
      background: radial-gradient(circle, #fdfbd3 0%, #e0ddaa 70%, transparent 100%);
      border-radius: 50%;
      box-shadow: 0 0 20px 10px rgba(255, 255, 200, 0.3);
      z-index: 2;
      animation: pulseMoon 6s ease-in-out infinite;
    }

    @keyframes pulseMoon {
      0%, 100% { box-shadow: 0 0 20px 10px rgba(255, 255, 200, 0.3); }
      50% { box-shadow: 0 0 30px 15px rgba(255, 255, 200, 0.5); }
    }

    .castle-light {
      position: absolute;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 20px;
      background: gold;
      border-radius: 50%;
      opacity: 0.5;
      animation: flicker 1.2s infinite alternate;
    }

    @keyframes flicker {
      0% { opacity: 0.4; }
      100% { opacity: 1; }
    }

    /* Progressive text */
    .story-text span {
      opacity: 0;
      transition: opacity 1s ease;
    }

    .story-text.visible span {
      opacity: 1;
    }

    /* Second mini-game styles */
    .path-choice {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 40px;
    }

    .path-button {
      padding: 12px 20px;
      background: #fff;
      color: #111;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }

    .path-result {
      margin-top: 30px;
      font-size: 1.2em;
      color: white;
      display: none;
    }
    </style>

</head>

<body>

<!-- Intro Scene -->
<div class="scene fade-in intro" id="intro">
  <div class="stars"></div>
  <img class="svg-cat" src="https://upload.wikimedia.org/wikipedia/commons/3/3a/Cat03.svg" alt="Soul the Cat" onclick="playPurr()" />
  <div class="title">Снова рядом</div>
  <button class="start-button" onclick="document.getElementById('scene1').scrollIntoView({behavior: 'smooth'});">
    Начать
  </button>
  <img class="castle" src="https://upload.wikimedia.org/wikipedia/commons/8/8b/Neuschwanstein_Castle_Drawing.svg" alt="Castle Background" />
</div>

<!-- Scene 1 -->
<div class="scene fade-in" id="scene1" style="background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);">
  <div class="scene fade-in-content">
    <p>Ты идёшь по лесу, где ветер поёт тебе знакомую песню. Кот Соул мурлычет: «Кушаааать зочу».</p>
  </div>
</div>

<!-- Mini-Game Scene -->
<div class="scene fade-in" style="background: radial-gradient(ellipse at center, #1a2a6c, #b21f1f, #fdbb2d);">
  <div class="game-area" id="game">
    <div class="found-message" id="foundMsg">Ты нашла звезду! ✨</div>
  </div>
</div>

<!-- Scene 2 -->
<div class="scene" style="background: linear-gradient(to bottom, #000000, #434343);">
  <div class="scene-content">
    <p>Выбери свой путь:</p>
    <div class="path-choice">
      <button class="path-button" onclick="choosePath('left')">Налево</button>
      <button class="path-button" onclick="choosePath('right')">Направо</button>
    </div>
    <div class="path-result" id="pathResult"></div>
  </div>
</div>
<div class="scene fade-in" style="background: linear-gradient(to bottom, #355c7d, #6c5b7b, #c06c84);">
  <div class="scene fade-in-content">
    <p><span>Ты подходишь к поляне.</span> <span>На ней светится тропа.</span> <span>Куда ты пойдёшь?</span></p>
  </div>
</div>

<!-- Scene 3 -->
<div class="scene fade-in" style="background: linear-gradient(to bottom, #2c3e50, #4ca1af);">
  <div class="scene fade-in-content">
    <p>Конец? Нет. Просто новый путь. <br> <a href="https://t.me/RiskniGolovoy" style="color: #fff; text-decoration: underline;">Написать Марату</a></p>
  </div>
</div>

<script>
  var purrSound = new Howl({
    src: ['https://cdn.pixabay.com/download/audio/2022/03/01/audio_25f7d190db.mp3?filename=cat-purring-6777.mp3'],
    volume: 0.6
  });

  function playPurr() {
    purrSound.play();
  }

  // Mini-game logic
  const gameArea = document.getElementById("game");
  const foundMsg = document.getElementById("foundMsg");
  const star = document.createElement("div");
  star.classList.add("star");

  function randomPosition(el) {
    const maxX = window.innerWidth - 50;
    const maxY = window.innerHeight - 50;
    el.style.left = Math.random() * maxX + "px";
    el.style.top = Math.random() * maxY + "px";
  }

  randomPosition(star);
  gameArea.appendChild(star);

  star.addEventListener("click", () => {
    star.style.display = "none";
    foundMsg.style.display = "block";
  });

  var starSound = new Howl({
    src: ['https://cdn.pixabay.com/download/audio/2022/03/15/audio_587491f6e3.mp3?filename=magic-attack-7187.mp3'],
    volume: 0.7
  });

  var bgMusic = new Howl({
    src: ['https://cdn.pixabay.com/download/audio/2023/03/28/audio_1f8a3b8c86.mp3?filename=calm-background-144984.mp3'],
    autoplay: true,
    loop: true,
    volume: 0.3
  });

  // Trigger background music only after user interaction (iOS restriction)
  document.body.addEventListener('click', function startMusicOnce() {
    bgMusic.play();
    document.body.removeEventListener('click', startMusicOnce);
  });

  star.addEventListener("click", () => {
    star.style.display = "none";
    foundMsg.style.display = "block";
    starSound.play();
  });

  // Moon/Light added above

  // Story reveal
  document.addEventListener("DOMContentLoaded", function () {
    const storyBlocks = document.querySelectorAll(".story-text");
    storyBlocks.forEach(block => {
      const spans = block.querySelectorAll("span");
      let i = 0;
      function showNext() {
        if (i < spans.length) {
          spans[i].style.opacity = 1;
          i++;
          setTimeout(showNext, 1500);
        }
      }
      block.classList.add("visible");
      showNext();
    });
  });

  // Path mini-game
  function choosePath(direction) {
    const result = document.getElementById("pathResult");
    if (direction === 'left') {
      result.innerText = "Ты пошла налево и увидела звезду!";
    } else {
      result.innerText = "Ты пошла направо и вышла к реке.";
    }
    result.style.display = "block";
  }
</script>



</body>
</html>
